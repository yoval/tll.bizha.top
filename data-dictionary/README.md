# æ•°æ®å­—å…¸æ€»è§ˆ

æœ¬æ–‡æ¡£åŒ…å«äº†tll_bi_dwæ•°æ®åº“ä¸­æ‰€æœ‰æ ¸å¿ƒæ•°æ®è¡¨çš„è¯¦ç»†è¯´æ˜ã€‚

## ğŸ“Š æ•°æ®è¡¨åˆ—è¡¨

### æ±‡æ€»å±‚è¡¨ (ADS - Application Data Service)

| è¡¨å | æè¿° | æ•°æ®é‡ | æ›´æ–°æ—¶é—´ |
|------|------|--------|----------|
| [ads_dbs_trade_food_di](./ads_dbs_trade_food_di.md) | é£Ÿå“äº¤æ˜“æ±‡æ€» | å¾…è¡¥å…… | å®æ—¶æ›´æ–° |
| [ads_dbs_trade_shop_di](./ads_dbs_trade_shop_di.md) | é—¨åº—äº¤æ˜“æ±‡æ€» | 33,076,418 æ¡ | å®æ—¶æ›´æ–° |
| [ads_dbs_trade_shop_pay_channel_di](./ads_dbs_trade_shop_pay_channel_di.md) | é—¨åº—æ”¯ä»˜æ¸ é“æ±‡æ€» | å¾…è¡¥å…… | å®æ—¶æ›´æ–° |
| [ads_fin_bom_dish_cost_df](./ads_fin_bom_dish_cost_df.md) | èœå“BOMæˆæœ¬è¡¨ | 12,832 æ¡ | æ¯æ—¥æ›´æ–° |
| [ads_fin_fee_bx_detail_di](./ads_fin_fee_bx_detail_di.md) | è´¹ç”¨æŠ¥é”€æ˜ç»†æ±‡æ€» | å¾…è¡¥å…… | å®æ—¶æ›´æ–° |
| [ads_fin_finance_paid_di](./ads_fin_finance_paid_di.md) | è´¢åŠ¡ä»˜æ¬¾æ±‡æ€» | 15,783 æ¡ | æ¯æ—¥æ›´æ–° |
| [ads_fin_shop_item_consume_di](./ads_fin_shop_item_consume_di.md) | é—¨åº—ç‰©æ–™æ¶ˆè€—æ±‡æ€» | 18,947,835 æ¡ | æ¯æ—¥æ›´æ–° |
| [ads_mkt_fines_summary_df](./ads_mkt_fines_summary_df.md) | å¸‚åœºç½šæ¬¾æ±‡æ€» | å¾…è¡¥å…… | å®æ—¶æ›´æ–° |

### æ˜ç»†å±‚è¡¨ (DWD - Data Warehouse Detail)

| è¡¨å | æè¿° | æ•°æ®é‡ | æ›´æ–°æ—¶é—´ |
|------|------|--------|----------|
| [dwd_rps_dt_order_goods_di](./dwd_rps_dt_order_goods_di.md) | è®¢å•å•†å“æ˜ç»† | å¾…è¡¥å…… | å®æ—¶æ›´æ–° |
| [dwd_rps_dt_orders_di](./dwd_rps_dt_orders_di.md) | è®¢å•æ˜ç»† | å¾…è¡¥å…… | å®æ—¶æ›´æ–° |
| [dwd_rps_tll_order_cancel_df](./dwd_rps_tll_order_cancel_df.md) | è®¢å•å–æ¶ˆæ˜ç»† | å¾…è¡¥å…… | å®æ—¶æ›´æ–° |
| [dwd_rps_tll_order_cancel_product_df](./dwd_rps_tll_order_cancel_product_df.md) | è®¢å•å–æ¶ˆå•†å“æ˜ç»† | å¾…è¡¥å…… | å®æ—¶æ›´æ–° |
| [dwd_rps_tll_order_details_di](./dwd_rps_tll_order_details_di.md) | è®¢å•è¯¦æƒ…æ˜ç»† | å¾…è¡¥å…… | å®æ—¶æ›´æ–° |
| [dwd_rps_tll_order_di](./dwd_rps_tll_order_di.md) | è®¢å•ä¸»è¡¨æ˜ç»† | 47,702 æ¡ | å®æ—¶æ›´æ–° |
| [dwd_spc_report_sales_di](./dwd_spc_report_sales_di.md) | é”€å”®æŠ¥è¡¨æ˜ç»† | å¾…è¡¥å…… | å®æ—¶æ›´æ–° |

### ç»´åº¦å±‚è¡¨ (DIM - Dimension)

| è¡¨å | æè¿° | æ•°æ®é‡ | æ›´æ–°æ—¶é—´ |
|------|------|--------|----------|
| [dim_oas_formmain_0145_all_df](./dim_oas_formmain_0145_all_df.md) | OAè¡¨å•ç»´åº¦ | å¾…è¡¥å…… | æ¯æ—¥æ›´æ–° |
| [dim_sup_srm_goods_df](./dim_sup_srm_goods_df.md) | å•†å“ç»´åº¦ | å¾…è¡¥å…… | æ¯æ—¥æ›´æ–° |

### æœåŠ¡å±‚è¡¨ (DWS - Data Warehouse Service)

| è¡¨å | æè¿° | æ•°æ®é‡ | æ›´æ–°æ—¶é—´ |
|------|------|--------|----------|
| [dws_trd_mtpos_order_pay_channel_details_di](./dws_trd_mtpos_order_pay_channel_details_di.md) | ç¾å›¢POSè®¢å•æ”¯ä»˜æ¸ é“è¯¦æƒ… | å¾…è¡¥å…… | å®æ—¶æ›´æ–° |

### Flinkå®æ—¶æµè¡¨

| è¡¨å | æè¿° | æ•°æ®é‡ | æ›´æ–°æ—¶é—´ |
|------|------|--------|----------|
| [flink_rps_all_new_tll_order_details_now_day_df](./flink_rps_all_new_tll_order_details_now_day_df.md) | å®æ—¶è®¢å•è¯¦æƒ… | å¾…è¡¥å…… | å®æ—¶æ›´æ–° |
| [flink_rps_all_new_tll_order_now_day_df](./flink_rps_all_new_tll_order_now_day_df.md) | å®æ—¶è®¢å•ä¸»è¡¨ | å¾…è¡¥å…… | å®æ—¶æ›´æ–° |
| [flink_rps_tll_presale_order_details_df](./flink_rps_tll_presale_order_details_df.md) | é¢„å”®è®¢å•è¯¦æƒ… | å¾…è¡¥å…… | å®æ—¶æ›´æ–° |
| [flink_rps_tll_presale_order_df](./flink_rps_tll_presale_order_df.md) | é¢„å”®è®¢å•ä¸»è¡¨ | å¾…è¡¥å…… | å®æ—¶æ›´æ–° |

### è¡¥å……æ•°æ®è¡¨

| è¡¨å | æè¿° | æ•°æ®é‡ | æ›´æ–°æ—¶é—´ |
|------|------|--------|----------|
| [imp_online_new_channel_supplement](./imp_online_new_channel_supplement.md) | çº¿ä¸Šæ¸ é“è¡¥å……æ•°æ® | å¾…è¡¥å…… | æ¯æ—¥æ›´æ–° |

## ğŸ” ä½¿ç”¨æŒ‡å—

### è¡¨å‘½åè§„åˆ™
- **ads_** : åº”ç”¨æ•°æ®æœåŠ¡å±‚ï¼Œé¢å‘ä¸šåŠ¡çš„æ±‡æ€»æ•°æ®
- **dwd_** : æ˜ç»†æ•°æ®å±‚ï¼Œä¿å­˜æœ€ç»†ç²’åº¦çš„ä¸šåŠ¡æ•°æ®
- **dim_** : ç»´åº¦æ•°æ®å±‚ï¼Œä¿å­˜ä¸šåŠ¡ç»´åº¦ä¿¡æ¯
- **dws_** : æœåŠ¡æ•°æ®å±‚ï¼Œé¢å‘åˆ†æçš„æ±‡æ€»æ•°æ®
- **flink_** : å®æ—¶æµè®¡ç®—è¡¨

### å­—æ®µç±»å‹è¯´æ˜
- **BIGINT** : é•¿æ•´å‹ï¼Œé€šå¸¸ç”¨äºå­˜å‚¨æ—¶é—´ã€æ•°é‡ç­‰
- **DECIMAL(p,s)** : ç²¾ç¡®å°æ•°ï¼Œç”¨äºå­˜å‚¨é‡‘é¢ç­‰éœ€è¦ç²¾ç¡®è®¡ç®—çš„æ•°æ®
- **VARCHAR(n)** : å¯å˜é•¿åº¦å­—ç¬¦ä¸²ï¼Œnä¸ºæœ€å¤§é•¿åº¦
- **INT** : æ•´å‹
- **DATE** : æ—¥æœŸç±»å‹

### å¸¸ç”¨æŸ¥è¯¢æ¨¡æ¿

#### 1. æŸ¥è¯¢æŸæ—¥æ•°æ®
```sql
SELECT * FROM è¡¨å 
WHERE business_date = 20240101;
```

#### 2. æŸ¥è¯¢æœ€æ–°æ•°æ®
```sql
SELECT * FROM è¡¨å 
ORDER BY business_date DESC 
LIMIT 10;
```

#### 3. æŸ¥è¯¢æ•°æ®é‡
```sql
SELECT COUNT(*) FROM è¡¨å;
```

#### 4. æŸ¥è¯¢æŸæ—¶é—´æ®µæ•°æ®
```sql
SELECT * FROM è¡¨å 
WHERE business_date BETWEEN 20240101 AND 20240131;
```

### æ³¨æ„äº‹é¡¹

1. **æ—¶é—´æ ¼å¼**ï¼šæ‰€æœ‰æ—¶é—´å­—æ®µå‡ä¸ºBIGINTç±»å‹ï¼Œæ ¼å¼ä¸ºYYYYMMDD
2. **åˆ†åŒºå­—æ®µ**ï¼šå¤§éƒ¨åˆ†è¡¨éƒ½æœ‰ptåˆ†åŒºå­—æ®µï¼Œè¡¨ç¤ºæ•°æ®åˆ†åŒº
3. **å­—ç¬¦å¤§å°å†™**ï¼šå­—ç¬¦ç±»å‹å­—æ®µæŸ¥è¯¢æ—¶éœ€æ³¨æ„å¤§å°å†™æ•æ„Ÿé—®é¢˜
4. **æ•°æ®æ›´æ–°é¢‘ç‡**ï¼š
   - å®æ—¶è¡¨ï¼šåˆ†é’Ÿçº§æ›´æ–°
   - æ—¥æ±‡æ€»è¡¨ï¼šæ¯æ—¥å‡Œæ™¨æ›´æ–°
   - ç»´åº¦è¡¨ï¼šæ¯æ—¥æ›´æ–°

## ğŸš€ å¿«é€Ÿå¼€å§‹

1. **æŸ¥çœ‹è¡¨ç»“æ„**ï¼šç‚¹å‡»è¡¨åé“¾æ¥æŸ¥çœ‹è¯¦ç»†å­—æ®µè¯´æ˜
2. **äº†è§£ä¸šåŠ¡å«ä¹‰**ï¼šæŸ¥çœ‹æ¯ä¸ªå­—æ®µçš„ä¸šåŠ¡æè¿°å’Œå–å€¼è¯´æ˜
3. **å‚è€ƒæŸ¥è¯¢ç¤ºä¾‹**ï¼šæ¯ä¸ªè¡¨éƒ½æä¾›äº†å¸¸ç”¨æŸ¥è¯¢SQLç¤ºä¾‹
4. **æ³¨æ„æ•°æ®è´¨é‡**ï¼šæŸ¥çœ‹æ¯ä¸ªè¡¨çš„æ³¨æ„äº‹é¡¹å’Œæœ€ä½³å®è·µ